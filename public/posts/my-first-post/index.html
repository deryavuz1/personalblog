<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Building a CPTC Practice Range Environment | Derya Yavuz Ionescu</title>
<meta name="keywords" content="">
<meta name="description" content="Introduction
For the purposes of training our team for the Collegiate Penetration Team Competition (CPTC) for the 2025-2026 season, as team captain, I was facing the challenge of providing an accurate laboratory range environment that the team could potentially face during the competition.
Luckily, my awesome friends ran to my help and all of us together began the planning and building process of out CPTC mock competition range - our goal was to accurately convey a potential modern customer environment with a variation of Windows and Linux servers and other applications.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/posts/my-first-post/">
<link crossorigin="anonymous" href="../../assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css" integrity="sha256-NDzEgLn/yPBMy&#43;XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/my-first-post/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Derya Yavuz Ionescu (Alt + H)">Derya Yavuz Ionescu</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Building a CPTC Practice Range Environment
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="35" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h1>
    <div class="post-meta"><span title='2025-11-12 14:15:59 -0600 CST'>November 12, 2025</span>

</div>
  </header> 
  <div class="post-content"><h2 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h2>
<p>For the purposes of training our team for the Collegiate Penetration Team Competition (CPTC) for the 2025-2026 season, as team captain, I was facing the challenge of providing an accurate laboratory range environment that the team could potentially face during the competition.</p>
<p>Luckily, my awesome friends ran to my help and all of us together began the planning and building process of out CPTC mock competition range - our goal was to accurately convey a potential modern customer environment with a variation of Windows and Linux servers and other applications.</p>
<h3 id="planning-stage">Planning stage<a hidden class="anchor" aria-hidden="true" href="#planning-stage">#</a></h3>
<p>This year‚Äôs theme was to conduct a penetration test on a <strong>Cruise Ship</strong>! From this hint, we began brainstorming about the services we might typically see on a big operation like a maritime vessel üö¢¬†:</p>
<ul>
<li>Content and media distribution services for in-room and on-board entertainment, such as Jellyfin servers</li>
<li>Chance game websites, such as an internal application running solitaire, or slot machines</li>
<li>Various web servers that enable visitors to order room service and put in-room requests,</li>
<li>Operational Technology (OT) elements such as pressure valves, ship navigation systems‚Ä¶</li>
</ul>
<p>We then began carving out a timeline for our build:</p>
<p><img alt="Our trusted whiteborad rough timeline." loading="lazy" src="../../assets/timeline.png"></p>
<p>We chose the name <code>EAGLECRUISES</code> as our imaginary company to simulate.</p>
<h3 id="technical-setup">Technical Setup<a hidden class="anchor" aria-hidden="true" href="#technical-setup">#</a></h3>
<p>We host a local lab running a Proxmox hypervisor. It gives us flexibility to create isolated VMs and overlay networks quickly, and to snapshot and revert the environment as needed. From there we layered services to replicate an on-board corporate network with an OT presence and typical IT resources.</p>
<p><strong>Cloud Environment (simulated)</strong></p>
<p>To keep costs low, the ‚Äúcloud‚Äù was a local simulation - a separate subnet that just housed our identity and data services. Within this subnet, we had:</p>
<ul>
<li>An OpenLDAP server (Ubuntu 22.04) which also had a MYSQ database storing sample PII. This subnet represented the backbone of authentication and sensitive data for the simulated environment.</li>
<li>All machines within this subnet had been domain-joined to OpenLDAP domain.</li>
<li>A payment API server that interacted with the payments associated to in-room service applications.</li>
<li>An AI chatbot that was vulnerable to a prompt injection attack through improper input sanitization.</li>
<li>An offsite backup server that stored various backup files, such as OpenLDAP and MYSQL dumps</li>
</ul>
<p><strong>Guest Network</strong></p>
<p>This subnet&rsquo;s goal was to simulate any applications a cruise guest could access to in a real-world setting - such as guest room televisions, content servers, room service portals, and captive portals for WiFi access. Our machines included:</p>
<ul>
<li>A guest network DNS server,</li>
<li>A captive portal to simulate a guest supplying login credentials to get wireless access on-board,</li>
<li>Guest television controls running through web applications</li>
</ul>
<p><strong>Operational Technology</strong></p>
<ul>
<li>A sample PLC/Modbus interface that simulated a lightweight simulated PLC endpoint to represent shipboard automation systems.</li>
<li>SCADABr server running with its default admin credentials and unencrypted web access.</li>
</ul>
<p><strong>On-Premises Servers</strong></p>
<p>The purpose of this subnet was to simulate an on-premises corporate environment, with a mix of more legacy technologies (Active Directory) that are still very abundant in the industry, and some more modern applications. These included:</p>
<ul>
<li>A vulnerable Jellyfin server with sample movie trailers and pictures loaded up to simulate a content distribution network on-board.</li>
<li>A domain controller (Windows Server 2019) for our Active Directory domain, with certificate services enabled.
<ul>
<li>Plan was to add Elastic/EDR if time allowed.</li>
</ul>
</li>
<li>A deliberately vulnerable AD segment to simulate common AD attack paths
<ul>
<li>UAC bypass scenarios, discoverable credentials in metadata fields, privilege escalation chains.</li>
</ul>
</li>
<li>Desk agent  workstations (Windows 10) that are domain-joined, simulating cruise ship employees.</li>
<li>Web servers for booking services, room dining and other purchases, chance-based games.</li>
<li>MS Exchange mail service with an SMTP configuration emulating an open/poorly configured relay to practice detection/mitigation.</li>
</ul>
<p>After we planned our initial setup on how to allocate machines, our workflow to fully configure this range was roughly to:</p>
<ul>
<li>Build base templates and snapshot them before customization.</li>
<li>Bring up routing on the ECL/edge routers for VNETing</li>
<li>Deploy services into their intended subnets and join domain where required (e.g., media server, payment client)</li>
<li>Push certificates to web UIs so browsers behave like in production, and our team can render without problem</li>
</ul>
<p>No matter how simple it sounded on paper - setting this range up took a little less than two months (I honestly blame MS Exchange for the installation times).</p>
<p>Here is our near-complete network diagram for the lab environment:</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Derya Yavuz Ionescu</a></span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
